cmake_minimum_required(VERSION 3.15)
project(mysh_simple VERSION 1.0.0 LANGUAGES CXX)

# 设置C++标准
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 编译选项
if(MSVC)
    add_compile_options(/W4)
    # 禁用一些Windows特定的警告
    add_compile_definitions(_CRT_SECURE_NO_WARNINGS)
else()
    add_compile_options(-Wall -Wextra -Wpedantic)
endif()

# 创建简化版本的可执行文件
add_executable(mysh_simple src/main_windows.cpp)

# 设置输出目录
set_target_properties(mysh_simple PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin
)

# Windows特定的链接库
if(WIN32)
    target_link_libraries(mysh_simple shlwapi)
endif()